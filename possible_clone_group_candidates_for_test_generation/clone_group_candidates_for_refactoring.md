# Possible Cloup Candidates for Parameterized Automatic Refactoring

# commons_math_3_6_1
## 1 (Partially)

<span style="color:red">This clone group is only partially refactorable base on current refactoring tool. THie first two clone instances would be refactorable, but the third and the fifth ones would not as they would generate "PDG Gap Node". </span>.

// More tests could be generated by using different numerical parameters.

[317, 'src/test/java', 'org.apache.commons.math3.geometry.euclidean.threed', 'FieldRotationDSTest', 'testComposeVectorOperator', 809, 836]

[317, 'src/test/java', 'org.apache.commons.math3.geometry.euclidean.threed', 'FieldRotationDSTest', 'testComposeFrameTransform', 838, 865]

[317, 'src/test/java', 'org.apache.commons.math3.geometry.euclidean.threed', 'FieldRotationDSTest', 'testComposeInverseVectorOperator', 895, 922]

[317, 'src/test/java', 'org.apache.commons.math3.geometry.euclidean.threed', 'FieldRotationDSTest', 'testComposeInverseframeTransform', 924, 951]

[317, 'src/test/java', 'org.apache.commons.math3.geometry.euclidean.threed', 'FieldRotationDfpTest', 'testComposeVectorOperator', 646, 673]

[317, 'src/test/java', 'org.apache.commons.math3.geometry.euclidean.threed', 'FieldRotationDfpTest', 'testComposeInverseVectorOperator', 734, 761]

```java
    @Test
    public void testComposeVectorOperator() throws MathIllegalArgumentException {

        FieldRotation<DerivativeStructure> r1       = new FieldRotation<DerivativeStructure>(createVector(2, -3, 5),
                                                                                             createAngle(1.7),
                                                                                             RotationConvention.VECTOR_OPERATOR);
        FieldRotation<DerivativeStructure> r2       = new FieldRotation<DerivativeStructure>(createVector(-1, 3, 2),
                                                                                             createAngle(0.3),
                                                                                             RotationConvention.VECTOR_OPERATOR);
        FieldRotation<DerivativeStructure> r3       = r2.compose(r1, RotationConvention.VECTOR_OPERATOR);
        FieldRotation<DerivativeStructure> r3Double = r2.compose(new Rotation(r1.getQ0().getReal(),
                                                                              r1.getQ1().getReal(),
                                                                              r1.getQ2().getReal(),
                                                                              r1.getQ3().getReal(),
                                                                              false),
                                                                 RotationConvention.VECTOR_OPERATOR);

        for (double x = -0.9; x < 0.9; x += 0.2) {
            for (double y = -0.9; y < 0.9; y += 0.2) {
                for (double z = -0.9; z < 0.9; z += 0.2) {
                    FieldVector3D<DerivativeStructure> u = createVector(x, y, z);
                    checkVector(r2.applyTo(r1.applyTo(u)), r3.applyTo(u));
                    checkVector(r2.applyTo(r1.applyTo(u)), r3Double.applyTo(u));
                }
            }
        }

    }

    @Test
    public void testComposeFrameTransform() throws MathIllegalArgumentException {

        FieldRotation<DerivativeStructure> r1       = new FieldRotation<DerivativeStructure>(createVector(2, -3, 5),
                                                                                             createAngle(1.7),
                                                                                             RotationConvention.FRAME_TRANSFORM);
        FieldRotation<DerivativeStructure> r2       = new FieldRotation<DerivativeStructure>(createVector(-1, 3, 2),
                                                                                             createAngle(0.3),
                                                                                             RotationConvention.FRAME_TRANSFORM);
        FieldRotation<DerivativeStructure> r3       = r2.compose(r1, RotationConvention.FRAME_TRANSFORM);
        FieldRotation<DerivativeStructure> r3Double = r2.compose(new Rotation(r1.getQ0().getReal(),
                                                                              r1.getQ1().getReal(),
                                                                              r1.getQ2().getReal(),
                                                                              r1.getQ3().getReal(),
                                                                              false),
                                                                 RotationConvention.FRAME_TRANSFORM);

        for (double x = -0.9; x < 0.9; x += 0.2) {
            for (double y = -0.9; y < 0.9; y += 0.2) {
                for (double z = -0.9; z < 0.9; z += 0.2) {
                    FieldVector3D<DerivativeStructure> u = createVector(x, y, z);
                    checkVector(r1.applyTo(r2.applyTo(u)), r3.applyTo(u));
                    checkVector(r1.applyTo(r2.applyTo(u)), r3Double.applyTo(u));
                }
            }
        }

    }

    @Test
    public void testComposeInverseVectorOperator() throws MathIllegalArgumentException {

        FieldRotation<DerivativeStructure> r1 = new FieldRotation<DerivativeStructure>(createVector(2, -3, 5),
                                                                                       createAngle(1.7),
                                                                                       RotationConvention.VECTOR_OPERATOR);
        FieldRotation<DerivativeStructure> r2 = new FieldRotation<DerivativeStructure>(createVector(-1, 3, 2),
                                                                                       createAngle(0.3),
                                                                                       RotationConvention.VECTOR_OPERATOR);
        FieldRotation<DerivativeStructure> r3 = r2.composeInverse(r1, RotationConvention.VECTOR_OPERATOR);
        FieldRotation<DerivativeStructure> r3Double = r2.composeInverse(new Rotation(r1.getQ0().getReal(),
                                                                                     r1.getQ1().getReal(),
                                                                                     r1.getQ2().getReal(),
                                                                                     r1.getQ3().getReal(),
                                                                                     false),
                                                                        RotationConvention.VECTOR_OPERATOR);

        for (double x = -0.9; x < 0.9; x += 0.2) {
            for (double y = -0.9; y < 0.9; y += 0.2) {
                for (double z = -0.9; z < 0.9; z += 0.2) {
                    FieldVector3D<DerivativeStructure> u = createVector(x, y, z);
                    checkVector(r2.applyInverseTo(r1.applyTo(u)), r3.applyTo(u));
                    checkVector(r2.applyInverseTo(r1.applyTo(u)), r3Double.applyTo(u));
                }
            }
        }

    }

    @Test
    public void testComposeInverseframeTransform() throws MathIllegalArgumentException {

        FieldRotation<DerivativeStructure> r1 = new FieldRotation<DerivativeStructure>(createVector(2, -3, 5),
                                                                                       createAngle(1.7),
                                                                                       RotationConvention.FRAME_TRANSFORM);
        FieldRotation<DerivativeStructure> r2 = new FieldRotation<DerivativeStructure>(createVector(-1, 3, 2),
                                                                                       createAngle(0.3),
                                                                                       RotationConvention.FRAME_TRANSFORM);
        FieldRotation<DerivativeStructure> r3 = r2.composeInverse(r1, RotationConvention.FRAME_TRANSFORM);
        FieldRotation<DerivativeStructure> r3Double = r2.composeInverse(new Rotation(r1.getQ0().getReal(),
                                                                                     r1.getQ1().getReal(),
                                                                                     r1.getQ2().getReal(),
                                                                                     r1.getQ3().getReal(),
                                                                                     false),
                                                                        RotationConvention.FRAME_TRANSFORM);

        for (double x = -0.9; x < 0.9; x += 0.2) {
            for (double y = -0.9; y < 0.9; y += 0.2) {
                for (double z = -0.9; z < 0.9; z += 0.2) {
                    FieldVector3D<DerivativeStructure> u = createVector(x, y, z);
                    checkVector(r1.applyTo(r2.applyInverseTo(u)), r3.applyTo(u));
                    checkVector(r1.applyTo(r2.applyInverseTo(u)), r3Double.applyTo(u));
                }
            }
        }

    }

    @Test
    public void testComposeVectorOperator() throws MathIllegalArgumentException {

        FieldRotation<Dfp> r1       = new FieldRotation<Dfp>(createVector(2, -3, 5),
                                                             createAngle(1.7),
                                                             RotationConvention.VECTOR_OPERATOR);
        FieldRotation<Dfp> r2       = new FieldRotation<Dfp>(createVector(-1, 3, 2),
                                                             createAngle(0.3),
                                                             RotationConvention.VECTOR_OPERATOR);
        FieldRotation<Dfp> r3       = r2.compose(r1, RotationConvention.VECTOR_OPERATOR);
        FieldRotation<Dfp> r3Double = r2.compose(new Rotation(r1.getQ0().getReal(),
                                                      r1.getQ1().getReal(),
                                                      r1.getQ2().getReal(),
                                                      r1.getQ3().getReal(),
                                                      false),
                                                 RotationConvention.VECTOR_OPERATOR);

        for (double x = -0.9; x < 0.9; x += 0.2) {
            for (double y = -0.9; y < 0.9; y += 0.2) {
                for (double z = -0.9; z < 0.9; z += 0.2) {
                    FieldVector3D<Dfp> u = createVector(x, y, z);
                    checkVector(r2.applyTo(r1.applyTo(u)), r3.applyTo(u));
                    checkVector(r2.applyTo(r1.applyTo(u)), r3Double.applyTo(u));
                }
            }
        }

    }

    @Test
    public void testComposeInverseVectorOperator() throws MathIllegalArgumentException {

        FieldRotation<Dfp> r1 = new FieldRotation<Dfp>(createVector(2, -3, 5),
                                                       createAngle(1.7),
                                                       RotationConvention.VECTOR_OPERATOR);
        FieldRotation<Dfp> r2 = new FieldRotation<Dfp>(createVector(-1, 3, 2),
                                                       createAngle(0.3),
                                                       RotationConvention.VECTOR_OPERATOR);
        FieldRotation<Dfp> r3 = r2.composeInverse(r1, RotationConvention.VECTOR_OPERATOR);
        FieldRotation<Dfp> r3Double = r2.composeInverse(new Rotation(r1.getQ0().getReal(),
                                                             r1.getQ1().getReal(),
                                                             r1.getQ2().getReal(),
                                                             r1.getQ3().getReal(),
                                                             false),
                                                        RotationConvention.VECTOR_OPERATOR);

        for (double x = -0.9; x < 0.9; x += 0.2) {
            for (double y = -0.9; y < 0.9; y += 0.2) {
                for (double z = -0.9; z < 0.9; z += 0.2) {
                    FieldVector3D<Dfp> u = createVector(x, y, z);
                    checkVector(r2.applyInverseTo(r1.applyTo(u)), r3.applyTo(u));
                    checkVector(r2.applyInverseTo(r1.applyTo(u)), r3Double.applyTo(u));
                }
            }
        }

    }
```

## 2

<span style="color:red">This clone group has a mix of type differences and data differences. It is a good candidate for automatic refactoring. </span>.

[381, 'src/test/java', 'org.apache.commons.math3.optim.nonlinear.scalar.noderiv', 'SimplexOptimizerMultiDirectionalTest', 'testMinimize1', 48, 67]

[381, 'src/test/java', 'org.apache.commons.math3.optim.nonlinear.scalar.noderiv', 'SimplexOptimizerNelderMeadTest', 'testMinimize1', 53, 72]

[381, 'src/test/java', 'org.apache.commons.math3.optim.nonlinear.scalar.noderiv', 'SimplexOptimizerNelderMeadTest', 'testMaximize1', 95, 114]

```java
    @Test
    public void testMinimize1() {
        SimplexOptimizer optimizer = new SimplexOptimizer(1e-11, 1e-30);
        final FourExtrema fourExtrema = new FourExtrema();

        final PointValuePair optimum
            = optimizer.optimize(new MaxEval(200),
                                 new ObjectiveFunction(fourExtrema),
                                 GoalType.MINIMIZE,
                                 new InitialGuess(new double[] { -3, 0 }),
                                 new MultiDirectionalSimplex(new double[] { 0.2, 0.2 }));
        Assert.assertEquals(fourExtrema.xM, optimum.getPoint()[0], 4e-6);
        Assert.assertEquals(fourExtrema.yP, optimum.getPoint()[1], 3e-6);
        Assert.assertEquals(fourExtrema.valueXmYp, optimum.getValue(), 8e-13);
        Assert.assertTrue(optimizer.getEvaluations() > 120);
        Assert.assertTrue(optimizer.getEvaluations() < 150);

        // Check that the number of iterations is updated (MATH-949).
        Assert.assertTrue(optimizer.getIterations() > 0);
    }

    @Test
    public void testMinimize1() {
        SimplexOptimizer optimizer = new SimplexOptimizer(1e-10, 1e-30);
        final FourExtrema fourExtrema = new FourExtrema();

        final PointValuePair optimum
            = optimizer.optimize(new MaxEval(100),
                                 new ObjectiveFunction(fourExtrema),
                                 GoalType.MINIMIZE,
                                 new InitialGuess(new double[] { -3, 0 }),
                                 new NelderMeadSimplex(new double[] { 0.2, 0.2 }));
        Assert.assertEquals(fourExtrema.xM, optimum.getPoint()[0], 2e-7);
        Assert.assertEquals(fourExtrema.yP, optimum.getPoint()[1], 2e-5);
        Assert.assertEquals(fourExtrema.valueXmYp, optimum.getValue(), 6e-12);
        Assert.assertTrue(optimizer.getEvaluations() > 60);
        Assert.assertTrue(optimizer.getEvaluations() < 90);

        // Check that the number of iterations is updated (MATH-949).
        Assert.assertTrue(optimizer.getIterations() > 0);
    }

    @Test
    public void testMaximize1() {
        SimplexOptimizer optimizer = new SimplexOptimizer(1e-10, 1e-30);
        final FourExtrema fourExtrema = new FourExtrema();

        final PointValuePair optimum
            = optimizer.optimize(new MaxEval(100),
                                 new ObjectiveFunction(fourExtrema),
                                 GoalType.MAXIMIZE,
                                 new InitialGuess(new double[] { -3, 0 }),
                                 new NelderMeadSimplex(new double[] { 0.2, 0.2 }));
        Assert.assertEquals(fourExtrema.xM, optimum.getPoint()[0], 1e-5);
        Assert.assertEquals(fourExtrema.yM, optimum.getPoint()[1], 3e-6);
        Assert.assertEquals(fourExtrema.valueXmYm, optimum.getValue(), 3e-12);
        Assert.assertTrue(optimizer.getEvaluations() > 60);
        Assert.assertTrue(optimizer.getEvaluations() < 90);

        // Check that the number of iterations is updated (MATH-949).
        Assert.assertTrue(optimizer.getIterations() > 0);
    }
```

## 3

<span style="color:red"> This one is a possible refactoring candidate. The current trial with first two clone instances has complaint about "PDG Node Gap". I will look more into this, and maybe we can generate two different parameterized test cases, one for *g.gradient* and one for *g.value*.  </span>
 
[505, 'src/test/java', 'org.apache.commons.math3.analysis.function', 'GaussianTest', 'testParametricUsage2', 101, 105]

[505, 'src/test/java', 'org.apache.commons.math3.analysis.function', 'GaussianTest', 'testParametricUsage5', 119, 123]

[505, 'src/test/java', 'org.apache.commons.math3.analysis.function', 'HarmonicOscillatorTest', 'testParametricUsage2', 91, 95]

[505, 'src/test/java', 'org.apache.commons.math3.analysis.function', 'HarmonicOscillatorTest', 'testParametricUsage4', 103, 107]

[505, 'src/test/java', 'org.apache.commons.math3.analysis.function', 'LogisticTest', 'testParametricUsage2', 112, 116]

[505, 'src/test/java', 'org.apache.commons.math3.analysis.function', 'LogisticTest', 'testParametricUsage4', 124, 128]

[505, 'src/test/java', 'org.apache.commons.math3.analysis.function', 'LogitTest', 'testParametricUsage2', 114, 118]

[505, 'src/test/java', 'org.apache.commons.math3.analysis.function', 'LogitTest', 'testParametricUsage4', 126, 130]

[505, 'src/test/java', 'org.apache.commons.math3.analysis.function', 'SigmoidTest', 'testParametricUsage2', 82, 86]

[505, 'src/test/java', 'org.apache.commons.math3.analysis.function', 'SigmoidTest', 'testParametricUsage4', 94, 98]

```java
    @Test(expected=DimensionMismatchException.class)
    public void testParametricUsage2() {
        final Gaussian.Parametric g = new Gaussian.Parametric();
        g.value(0, new double[] {0});
    }

    @Test(expected=DimensionMismatchException.class)
    public void testParametricUsage5() {
        final Gaussian.Parametric g = new Gaussian.Parametric();
        g.gradient(0, new double[] {0});
    }

    @Test(expected=DimensionMismatchException.class)
    public void testParametricUsage2() {
        final HarmonicOscillator.Parametric g = new HarmonicOscillator.Parametric();
        g.value(0, new double[] {0});
    }

    @Test(expected=DimensionMismatchException.class)
    public void testParametricUsage4() {
        final HarmonicOscillator.Parametric g = new HarmonicOscillator.Parametric();
        g.gradient(0, new double[] {0});
    }

    @Test(expected=DimensionMismatchException.class)
    public void testParametricUsage2() {
        final Logistic.Parametric g = new Logistic.Parametric();
        g.value(0, new double[] {0});
    }

    @Test(expected=DimensionMismatchException.class)
    public void testParametricUsage4() {
        final Logistic.Parametric g = new Logistic.Parametric();
        g.gradient(0, new double[] {0});
    }

    @Test(expected=DimensionMismatchException.class)
    public void testParametricUsage2() {
        final Logit.Parametric g = new Logit.Parametric();
        g.value(0, new double[] {0});
    }

    @Test(expected=DimensionMismatchException.class)
    public void testParametricUsage4() {
        final Logit.Parametric g = new Logit.Parametric();
        g.gradient(0, new double[] {0});
    }

    @Test(expected=DimensionMismatchException.class)
    public void testParametricUsage2() {
        final Sigmoid.Parametric g = new Sigmoid.Parametric();
        g.value(0, new double[] {0});
    }

    @Test(expected=DimensionMismatchException.class)
    public void testParametricUsage4() {
        final Sigmoid.Parametric g = new Sigmoid.Parametric();
        g.gradient(0, new double[] {0});
    }
```

# Solr_6.6.6

## 4
<span style="color:red"> Interesting refactoring candidates with differences in parameters passed in function calls. </span>

[2295, 'src/test', 'org.apache.solr.update.processor', 'AtomicUpdatesTest', 'testRemove', 48, 113]

[2295, 'src/test', 'org.apache.solr.update.processor', 'AtomicUpdatesTest', 'testRemoveIntegerUsingStringType', 250, 312]

[2295, 'src/test', 'org.apache.solr.update.processor', 'AtomicUpdatesTest', 'testRemoveFloatUsingStringType', 768, 834]

```java
  @Test
  public void testRemove() throws Exception {
    SolrInputDocument doc;

    doc = new SolrInputDocument();
    doc.setField("id", "1");
    doc.setField("cat", new String[]{"aaa", "bbb", "ccc", "ccc", "ddd"});
    assertU(adoc(doc));

    doc = new SolrInputDocument();
    doc.setField("id", "2");
    doc.setField("cat", new String[]{"aaa", "bbb", "bbb", "ccc", "ddd"});
    assertU(adoc(doc));


    doc = new SolrInputDocument();
    doc.setField("id", "20");
    doc.setField("cat", new String[]{"aaa", "ccc", "ddd"});
    assertU(adoc(doc));

    doc = new SolrInputDocument();
    doc.setField("id", "21");
    doc.setField("cat", new String[]{"aaa", "bbb", "ddd"});
    assertU(adoc(doc));


    assertU(commit());

    assertQ(req("q", "cat:*", "indent", "true"), "//result[@numFound = '4']");
    assertQ(req("q", "cat:bbb", "indent", "true"), "//result[@numFound = '3']");


    doc = new SolrInputDocument();
    doc.setField("id", "1");
    List<String> removeList = new ArrayList<String>();
    removeList.add("bbb");
    removeList.add("ccc");
    doc.setField("cat", ImmutableMap.of("remove", removeList)); //behavior when hitting Solr through ZK
    assertU(adoc(doc));
    assertU(commit());

    assertQ(req("q", "cat:*", "indent", "true"), "//result[@numFound = '4']");
    assertQ(req("q", "cat:bbb", "indent", "true"), "//result[@numFound = '2']");

    doc = new SolrInputDocument();
    doc.setField("id", "21");
    removeList = new ArrayList<String>();
    removeList.add("bbb");
    removeList.add("ccc");
    doc.setField("cat", ImmutableMap.of("remove", removeList)); //behavior when hitting Solr through ZK
    assertU(adoc(doc));
    assertU(commit());

    assertQ(req("q", "cat:*", "indent", "true"), "//result[@numFound = '4']");
    assertQ(req("q", "cat:bbb", "indent", "true"), "//result[@numFound = '1']");

    doc = new SolrInputDocument();
    doc.setField("id", "1");
    doc.setField("cat", ImmutableMap.of("remove", "aaa")); //behavior when hitting Solr directly

    assertU(adoc(doc));
    assertU(commit());

    assertQ(req("q", "cat:*", "indent", "true"), "//result[@numFound = '4']");
    assertQ(req("q", "cat:aaa", "indent", "true"), "//result[@numFound = '3']");
  }

  @Test
  public void testRemoveIntegerUsingStringType() throws Exception {
    SolrInputDocument doc;

    doc = new SolrInputDocument();
    doc.setField("id", "1001");
    doc.setField("intRemove", new String[]{"111", "222", "333", "333", "444"});
    assertU(adoc(doc));

    doc = new SolrInputDocument();
    doc.setField("id", "1002");
    doc.setField("intRemove", new String[]{"111", "222", "222", "333", "444"});
    assertU(adoc(doc));

    doc = new SolrInputDocument();
    doc.setField("id", "1020");
    doc.setField("intRemove", new String[]{"111", "333", "444"});
    assertU(adoc(doc));

    doc = new SolrInputDocument();
    doc.setField("id", "1021");
    doc.setField("intRemove", new String[]{"111", "222", "444"});
    assertU(adoc(doc));
    assertU(commit());

    assertQ(req("q", "intRemove:[* TO *]", "indent", "true"), "//result[@numFound = '4']");
    assertQ(req("q", "intRemove:222", "indent", "true"), "//result[@numFound = '3']");


    doc = new SolrInputDocument();
    doc.setField("id", "1001");
    List<String> removeList = new ArrayList<String>();
    removeList.add("222");
    removeList.add("333");
    doc.setField("intRemove", ImmutableMap.of("remove", removeList)); //behavior when hitting Solr through ZK
    assertU(adoc(doc));
    assertU(commit());

    assertQ(req("q", "intRemove:[* TO *]", "indent", "true"), "//result[@numFound = '4']");
    assertQ(req("q", "intRemove:222", "indent", "true"), "//result[@numFound = '2']");

    doc = new SolrInputDocument();
    doc.setField("id", "1021");
    removeList = new ArrayList<String>();
    removeList.add("222");
    removeList.add("333");
    doc.setField("intRemove", ImmutableMap.of("remove", removeList)); //behavior when hitting Solr through ZK
    assertU(adoc(doc));
    assertU(commit());

    assertQ(req("q", "intRemove:[* TO *]", "indent", "true"), "//result[@numFound = '4']");
    assertQ(req("q", "intRemove:222", "indent", "true"), "//result[@numFound = '1']");

    doc = new SolrInputDocument();
    doc.setField("id", "1001");
    doc.setField("intRemove", ImmutableMap.of("remove", "111")); //behavior when hitting Solr directly

    assertU(adoc(doc));
    assertU(commit());

    assertQ(req("q", "intRemove:[* TO *]", "indent", "true"), "//result[@numFound = '4']");
    assertQ(req("q", "intRemove:111", "indent", "true"), "//result[@numFound = '3']");
  }

  @Test
  public void testRemoveFloatUsingStringType() throws Exception {
    SolrInputDocument doc;

    doc = new SolrInputDocument();
    doc.setField("id", "10001");
    doc.setField("floatRemove", new String[]{"111.111", "222.222", "333.333", "333.333", "444.444"});

    assertU(adoc(doc));

    doc = new SolrInputDocument();
    doc.setField("id", "10002");
    doc.setField("floatRemove", new String[]{"111.111", "222.222", "222.222", "333.333", "444.444"});
    assertU(adoc(doc));


    doc = new SolrInputDocument();
    doc.setField("id", "10020");
    doc.setField("floatRemove", new String[]{"111.111", "333.333", "444.444"});
    assertU(adoc(doc));

    doc = new SolrInputDocument();
    doc.setField("id", "10021");
    doc.setField("floatRemove", new String[]{"111.111", "222.222", "444.444"});
    assertU(adoc(doc));

    assertU(commit());

    assertQ(req("q", "floatRemove:[* TO *]", "indent", "true"), "//result[@numFound = '4']");
    assertQ(req("q", "floatRemove:\"222.222\"", "indent", "true"), "//result[@numFound = '3']");


    doc = new SolrInputDocument();
    doc.setField("id", "10001");
    List<String> removeList = new ArrayList<String>();
    removeList.add("222.222");
    removeList.add("333.333");

    doc.setField("floatRemove", ImmutableMap.of("remove", removeList)); //behavior when hitting Solr through ZK
    assertU(adoc(doc));
    assertU(commit());

    assertQ(req("q", "floatRemove:[* TO *]", "indent", "true"), "//result[@numFound = '4']");
    assertQ(req("q", "floatRemove:\"222.222\"", "indent", "true"), "//result[@numFound = '2']");

    doc = new SolrInputDocument();
    doc.setField("id", "10021");
    removeList = new ArrayList<String>();
    removeList.add("222.222");
    removeList.add("333.333");
    doc.setField("floatRemove", ImmutableMap.of("remove", removeList)); //behavior when hitting Solr through ZK
    assertU(adoc(doc));
    assertU(commit());

    assertQ(req("q", "floatRemove:[* TO *]", "indent", "true"), "//result[@numFound = '4']");
    assertQ(req("q", "floatRemove:\"222.222\"", "indent", "true"), "//result[@numFound = '1']");

    doc = new SolrInputDocument();
    doc.setField("id", "10001");
    doc.setField("floatRemove", ImmutableMap.of("remove", "111.111")); //behavior when hitting Solr directly

    assertU(adoc(doc));
    assertU(commit());

    assertQ(req("q", "floatRemove:[* TO *]", "indent", "true"), "//result[@numFound = '4']");
    assertQ(req("q", "floatRemove:\"111.111\"", "indent", "true"), "//result[@numFound = '3']");
  }
```

# joda_time_2.10

## 5

[1956, 'src/test/java', 'org.joda.time', 'TestDateTimeZoneCutover', 'testDateTimeCreation_athens', 1316, 1321]

[1956, 'src/test/java', 'org.joda.time', 'TestDateTimeZoneCutover', 'testDateTimeCreation_paris', 1323, 1328]

[1956, 'src/test/java', 'org.joda.time', 'TestDateTimeZoneCutover', 'testDateTimeCreation_london', 1330, 1335]

[1956, 'src/test/java', 'org.joda.time', 'TestDateTimeZoneCutover', 'testDateTimeCreation_newYork', 1337, 1342]

[1956, 'src/test/java', 'org.joda.time', 'TestDateTimeZoneCutover', 'testDateTimeCreation_losAngeles', 1344, 1349]
```java
    public void testDateTimeCreation_athens() {
        DateTimeZone zone = DateTimeZone.forID("Europe/Athens");
        DateTime base = new DateTime(2011, 10, 30, 3, 15, zone);
        assertEquals("2011-10-30T03:15:00.000+03:00", base.toString());
        assertEquals("2011-10-30T03:15:00.000+02:00", base.plusHours(1).toString());
    }

    public void testDateTimeCreation_paris() {
        DateTimeZone zone = DateTimeZone.forID("Europe/Paris");
        DateTime base = new DateTime(2011, 10, 30, 2, 15, zone);
        assertEquals("2011-10-30T02:15:00.000+02:00", base.toString());
        assertEquals("2011-10-30T02:15:00.000+01:00", base.plusHours(1).toString());
    }

    public void testDateTimeCreation_london() {
        DateTimeZone zone = DateTimeZone.forID("Europe/London");
        DateTime base = new DateTime(2011, 10, 30, 1, 15, zone);
        assertEquals("2011-10-30T01:15:00.000+01:00", base.toString());
        assertEquals("2011-10-30T01:15:00.000Z", base.plusHours(1).toString());
    }

    public void testDateTimeCreation_newYork() {
        DateTimeZone zone = DateTimeZone.forID("America/New_York");
        DateTime base = new DateTime(2010, 11, 7, 1, 15, zone);
        assertEquals("2010-11-07T01:15:00.000-04:00", base.toString());
        assertEquals("2010-11-07T01:15:00.000-05:00", base.plusHours(1).toString());
    }

    public void testDateTimeCreation_losAngeles() {
        DateTimeZone zone = DateTimeZone.forID("America/Los_Angeles");
        DateTime base = new DateTime(2010, 11, 7, 1, 15, zone);
        assertEquals("2010-11-07T01:15:00.000-07:00", base.toString());
        assertEquals("2010-11-07T01:15:00.000-08:00", base.plusHours(1).toString());
    }
```


## 6 (Similarity = 0.95) (Partially)

[445, 'src/test/java', 'org.joda.time.format', 'TestPeriodFormatterBuilder', 'testFormatPrefixSimple1', 314, 324]

[445, 'src/test/java', 'org.joda.time.format', 'TestPeriodFormatterBuilder', 'testFormatPrefixSimple2', 326, 336]

[445, 'src/test/java', 'org.joda.time.format', 'TestPeriodFormatterBuilder', 'testFormatPrefixPlural1', 365, 375]

[445, 'src/test/java', 'org.joda.time.format', 'TestPeriodFormatterBuilder', 'testFormatPrefixPlural2', 377, 387]

[445, 'src/test/java', 'org.joda.time.format', 'TestPeriodFormatterBuilder', 'testFormatSuffixSimple1', 522, 532]

[445, 'src/test/java', 'org.joda.time.format', 'TestPeriodFormatterBuilder', 'testFormatSuffixSimple2', 534, 544]

[445, 'src/test/java', 'org.joda.time.format', 'TestPeriodFormatterBuilder', 'testFormatSuffixPlural1', 582, 592]

[445, 'src/test/java', 'org.joda.time.format', 'TestPeriodFormatterBuilder', 'testFormatSuffixPlural2', 594, 604]

[445, 'src/test/java', 'org.joda.time.format', 'TestPeriodFormatterBuilder', 'testFormatPrefixSuffix', 766, 776]

```java
public void testFormatPrefixSimple1() {
    PeriodFormatter f = builder.appendPrefix("Years:").appendYears().toFormatter();
    assertEquals("Years:1", f.print(PERIOD));
    assertEquals(7, f.getPrinter().calculatePrintedLength(PERIOD, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(PERIOD, Integer.MAX_VALUE, null));

    Period p = new Period(0, 0, 0, 0, 0, 0, 0, 0);
    assertEquals("Years:0", f.print(p));
    assertEquals(7, f.getPrinter().calculatePrintedLength(p, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(p, Integer.MAX_VALUE, null));
}

public void testFormatPrefixSimple2() {
    PeriodFormatter f = builder.appendPrefix("Hours:").appendHours().toFormatter();
    assertEquals("Hours:5", f.print(PERIOD));
    assertEquals(7, f.getPrinter().calculatePrintedLength(PERIOD, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(PERIOD, Integer.MAX_VALUE, null));

    Period p = new Period(0, 0, 0, 0, 0, 0, 0, 0);
    assertEquals("Hours:0", f.print(p));
    assertEquals(7, f.getPrinter().calculatePrintedLength(p, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(p, Integer.MAX_VALUE, null));
}

public void testFormatPrefixPlural1() {
    PeriodFormatter f = builder.appendPrefix("Year:", "Years:").appendYears().toFormatter();
    assertEquals("Year:1", f.print(PERIOD));
    assertEquals(6, f.getPrinter().calculatePrintedLength(PERIOD, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(PERIOD, Integer.MAX_VALUE, null));

    Period p = new Period(0, 0, 0, 0, 0, 0, 0, 0);
    assertEquals("Years:0", f.print(p));
    assertEquals(7, f.getPrinter().calculatePrintedLength(p, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(p, Integer.MAX_VALUE, null));
}

public void testFormatPrefixPlural2() {
    PeriodFormatter f = builder.appendPrefix("Hour:", "Hours:").appendHours().toFormatter();
    assertEquals("Hours:5", f.print(PERIOD));
    assertEquals(7, f.getPrinter().calculatePrintedLength(PERIOD, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(PERIOD, Integer.MAX_VALUE, null));

    Period p = new Period(0, 0, 0, 0, 0, 0, 0, 0);
    assertEquals("Hours:0", f.print(p));
    assertEquals(7, f.getPrinter().calculatePrintedLength(p, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(p, Integer.MAX_VALUE, null));
}

public void testFormatSuffixSimple1() {
    PeriodFormatter f = builder.appendYears().appendSuffix(" years").toFormatter();
    assertEquals("1 years", f.print(PERIOD));
    assertEquals(7, f.getPrinter().calculatePrintedLength(PERIOD, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(PERIOD, Integer.MAX_VALUE, null));

    Period p = new Period(0, 0, 0, 0, 0, 0, 0, 0);
    assertEquals("0 years", f.print(p));
    assertEquals(7, f.getPrinter().calculatePrintedLength(p, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(p, Integer.MAX_VALUE, null));
}

public void testFormatSuffixSimple2() {
    PeriodFormatter f = builder.appendHours().appendSuffix(" hours").toFormatter();
    assertEquals("5 hours", f.print(PERIOD));
    assertEquals(7, f.getPrinter().calculatePrintedLength(PERIOD, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(PERIOD, Integer.MAX_VALUE, null));

    Period p = new Period(0, 0, 0, 0, 0, 0, 0, 0);
    assertEquals("0 hours", f.print(p));
    assertEquals(7, f.getPrinter().calculatePrintedLength(p, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(p, Integer.MAX_VALUE, null));
}

public void testFormatSuffixPlural1() {
    PeriodFormatter f = builder.appendYears().appendSuffix(" year", " years").toFormatter();
    assertEquals("1 year", f.print(PERIOD));
    assertEquals(6, f.getPrinter().calculatePrintedLength(PERIOD, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(PERIOD, Integer.MAX_VALUE, null));

    Period p = new Period(0, 0, 0, 0, 0, 0, 0, 0);
    assertEquals("0 years", f.print(p));
    assertEquals(7, f.getPrinter().calculatePrintedLength(p, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(p, Integer.MAX_VALUE, null));
}

public void testFormatSuffixPlural2() {
    PeriodFormatter f = builder.appendHours().appendSuffix(" hour", " hours").toFormatter();
    assertEquals("5 hours", f.print(PERIOD));
    assertEquals(7, f.getPrinter().calculatePrintedLength(PERIOD, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(PERIOD, Integer.MAX_VALUE, null));

    Period p = new Period(0, 0, 0, 0, 0, 0, 0, 0);
    assertEquals("0 hours", f.print(p));
    assertEquals(7, f.getPrinter().calculatePrintedLength(p, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(p, Integer.MAX_VALUE, null));
}

public void testFormatPrefixSuffix() {
    PeriodFormatter f = builder.appendPrefix("P").appendYears().appendSuffix("Y").toFormatter();
    assertEquals("P1Y", f.print(PERIOD));
    assertEquals(3, f.getPrinter().calculatePrintedLength(PERIOD, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(PERIOD, Integer.MAX_VALUE, null));

    Period p = new Period(0, 0, 0, 0, 0, 0, 0, 0);
    assertEquals("P0Y", f.print(p));
    assertEquals(3, f.getPrinter().calculatePrintedLength(p, null));
    assertEquals(1, f.getPrinter().countFieldsToPrint(p, Integer.MAX_VALUE, null));
}
```

## 7

[1152, 'src/test/java', 'org.joda.time', 'TestDateMidnight_Constructors', 'testConstructor_nullDateTimeZone', 207, 211]

[1152, 'src/test/java', 'org.joda.time', 'TestDateMidnight_Constructors', 'testConstructor_nullChronology', 225, 229]

[1152, 'src/test/java', 'org.joda.time', 'TestDateMidnight_Constructors', 'testConstructor_nullObject', 328, 332]

[1152, 'src/test/java', 'org.joda.time', 'TestDateTime_Constructors', 'testConstructor_nullDateTimeZone', 203, 207]

[1152, 'src/test/java', 'org.joda.time', 'TestDateTime_Constructors', 'testConstructor_nullChronology', 221, 225]

[1152, 'src/test/java', 'org.joda.time', 'TestDateTime_Constructors', 'testConstructor_nullObject', 324, 328]

[1152, 'src/test/java', 'org.joda.time', 'TestInstant_Constructors', 'testConstructor_nullObject', 206, 210]

[1152, 'src/test/java', 'org.joda.time', 'TestMutableDateTime_Constructors', 'testConstructor_nullDateTimeZone', 188, 192]

[1152, 'src/test/java', 'org.joda.time', 'TestMutableDateTime_Constructors', 'testConstructor_nullChronology', 206, 210]

[1152, 'src/test/java', 'org.joda.time', 'TestMutableDateTime_Constructors', 'testConstructor_nullObject', 309, 313]


```java
public void testConstructor_nullDateTimeZone() throws Throwable {
    DateMidnight test = new DateMidnight((DateTimeZone) null);
    assertEquals(ISOChronology.getInstance(), test.getChronology());
    assertEquals(TEST_TIME_NOW_LONDON, test.getMillis());
}

public void testConstructor_nullChronology() throws Throwable {
    DateMidnight test = new DateMidnight((Chronology) null);
    assertEquals(ISOChronology.getInstance(), test.getChronology());
    assertEquals(TEST_TIME_NOW_LONDON, test.getMillis());
}

public void testConstructor_nullObject() throws Throwable {
    DateMidnight test = new DateMidnight((Object) null);
    assertEquals(ISOChronology.getInstance(), test.getChronology());
    assertEquals(TEST_TIME_NOW_LONDON, test.getMillis());
}

public void testConstructor_nullDateTimeZone() throws Throwable {
    DateTime test = new DateTime((DateTimeZone) null);
    assertEquals(ISOChronology.getInstance(), test.getChronology());
    assertEquals(TEST_TIME_NOW, test.getMillis());
}

public void testConstructor_nullChronology() throws Throwable {
    DateTime test = new DateTime((Chronology) null);
    assertEquals(ISOChronology.getInstance(), test.getChronology());
    assertEquals(TEST_TIME_NOW, test.getMillis());
}

public void testConstructor_nullObject() throws Throwable {
    DateTime test = new DateTime((Object) null);
    assertEquals(ISOChronology.getInstance(), test.getChronology());
    assertEquals(TEST_TIME_NOW, test.getMillis());
}

public void testConstructor_nullObject() throws Throwable {
    Instant test = new Instant((Object) null);
    assertEquals(ISOChronology.getInstanceUTC(), test.getChronology());
    assertEquals(TEST_TIME_NOW, test.getMillis());
}

public void testConstructor_nullDateTimeZone() throws Throwable {
    MutableDateTime test = new MutableDateTime((DateTimeZone) null);
    assertEquals(ISOChronology.getInstance(), test.getChronology());
    assertEquals(TEST_TIME_NOW, test.getMillis());
}

public void testConstructor_nullChronology() throws Throwable {
    MutableDateTime test = new MutableDateTime((Chronology) null);
    assertEquals(ISOChronology.getInstance(), test.getChronology());
    assertEquals(TEST_TIME_NOW, test.getMillis());
}

public void testConstructor_nullObject() throws Throwable {
    MutableDateTime test = new MutableDateTime((Object) null);
    assertEquals(ISOChronology.getInstance(), test.getChronology());
    assertEquals(TEST_TIME_NOW, test.getMillis());
}
```

## 8

[1337, 'src/test/java', 'org.joda.time', 'TestInstant_Basics', 'testIsEqual_RI', 262, 285]

[1337, 'src/test/java', 'org.joda.time', 'TestInstant_Basics', 'testIsBefore_RI', 300, 323]

[1337, 'src/test/java', 'org.joda.time', 'TestInstant_Basics', 'testIsAfter_RI', 338, 361]

[1337, 'src/test/java', 'org.joda.time', 'TestMutableDateTime_Basics', 'testIsEqual', 312, 335]

[1337, 'src/test/java', 'org.joda.time', 'TestMutableDateTime_Basics', 'testIsBefore', 337, 360]

[1337, 'src/test/java', 'org.joda.time', 'TestMutableDateTime_Basics', 'testIsAfter', 362, 385]

```java
public void testIsEqual_RI() {
    Instant test1 = new Instant(TEST_TIME1);
    Instant test1a = new Instant(TEST_TIME1);
    assertEquals(true, test1.isEqual(test1a));
    assertEquals(true, test1a.isEqual(test1));
    assertEquals(true, test1.isEqual(test1));
    assertEquals(true, test1a.isEqual(test1a));

    Instant test2 = new Instant(TEST_TIME2);
    assertEquals(false, test1.isEqual(test2));
    assertEquals(false, test2.isEqual(test1));

    DateTime test3 = new DateTime(TEST_TIME2, GregorianChronology.getInstance(PARIS));
    assertEquals(false, test1.isEqual(test3));
    assertEquals(false, test3.isEqual(test1));
    assertEquals(true, test3.isEqual(test2));

    assertEquals(false, test2.isEqual(new MockInstant()));
    assertEquals(true, test1.isEqual(new MockInstant()));

    assertEquals(false, new Instant(TEST_TIME_NOW + 1).isEqual(null));
    assertEquals(true, new Instant(TEST_TIME_NOW).isEqual(null));
    assertEquals(false, new Instant(TEST_TIME_NOW - 1).isEqual(null));
}

public void testIsBefore_RI() {
    Instant test1 = new Instant(TEST_TIME1);
    Instant test1a = new Instant(TEST_TIME1);
    assertEquals(false, test1.isBefore(test1a));
    assertEquals(false, test1a.isBefore(test1));
    assertEquals(false, test1.isBefore(test1));
    assertEquals(false, test1a.isBefore(test1a));

    Instant test2 = new Instant(TEST_TIME2);
    assertEquals(true, test1.isBefore(test2));
    assertEquals(false, test2.isBefore(test1));

    DateTime test3 = new DateTime(TEST_TIME2, GregorianChronology.getInstance(PARIS));
    assertEquals(true, test1.isBefore(test3));
    assertEquals(false, test3.isBefore(test1));
    assertEquals(false, test3.isBefore(test2));

    assertEquals(false, test2.isBefore(new MockInstant()));
    assertEquals(false, test1.isBefore(new MockInstant()));

    assertEquals(false, new Instant(TEST_TIME_NOW + 1).isBefore(null));
    assertEquals(false, new Instant(TEST_TIME_NOW).isBefore(null));
    assertEquals(true, new Instant(TEST_TIME_NOW - 1).isBefore(null));
}

public void testIsAfter_RI() {
    Instant test1 = new Instant(TEST_TIME1);
    Instant test1a = new Instant(TEST_TIME1);
    assertEquals(false, test1.isAfter(test1a));
    assertEquals(false, test1a.isAfter(test1));
    assertEquals(false, test1.isAfter(test1));
    assertEquals(false, test1a.isAfter(test1a));

    Instant test2 = new Instant(TEST_TIME2);
    assertEquals(false, test1.isAfter(test2));
    assertEquals(true, test2.isAfter(test1));

    DateTime test3 = new DateTime(TEST_TIME2, GregorianChronology.getInstance(PARIS));
    assertEquals(false, test1.isAfter(test3));
    assertEquals(true, test3.isAfter(test1));
    assertEquals(false, test3.isAfter(test2));

    assertEquals(true, test2.isAfter(new MockInstant()));
    assertEquals(false, test1.isAfter(new MockInstant()));

    assertEquals(true, new Instant(TEST_TIME_NOW + 1).isAfter(null));
    assertEquals(false, new Instant(TEST_TIME_NOW).isAfter(null));
    assertEquals(false, new Instant(TEST_TIME_NOW - 1).isAfter(null));
}

public void testIsEqual() {
    MutableDateTime test1 = new MutableDateTime(TEST_TIME1);
    MutableDateTime test1a = new MutableDateTime(TEST_TIME1);
    assertEquals(true, test1.isEqual(test1a));
    assertEquals(true, test1a.isEqual(test1));
    assertEquals(true, test1.isEqual(test1));
    assertEquals(true, test1a.isEqual(test1a));

    MutableDateTime test2 = new MutableDateTime(TEST_TIME2);
    assertEquals(false, test1.isEqual(test2));
    assertEquals(false, test2.isEqual(test1));

    MutableDateTime test3 = new MutableDateTime(TEST_TIME2, GregorianChronology.getInstance(PARIS));
    assertEquals(false, test1.isEqual(test3));
    assertEquals(false, test3.isEqual(test1));
    assertEquals(true, test3.isEqual(test2));

    assertEquals(false, test2.isEqual(new MockInstant()));
    assertEquals(true, test1.isEqual(new MockInstant()));

    assertEquals(false, new MutableDateTime(TEST_TIME_NOW + 1).isEqual(null));
    assertEquals(true, new MutableDateTime(TEST_TIME_NOW).isEqual(null));
    assertEquals(false, new MutableDateTime(TEST_TIME_NOW - 1).isEqual(null));
}

public void testIsBefore() {
    MutableDateTime test1 = new MutableDateTime(TEST_TIME1);
    MutableDateTime test1a = new MutableDateTime(TEST_TIME1);
    assertEquals(false, test1.isBefore(test1a));
    assertEquals(false, test1a.isBefore(test1));
    assertEquals(false, test1.isBefore(test1));
    assertEquals(false, test1a.isBefore(test1a));

    MutableDateTime test2 = new MutableDateTime(TEST_TIME2);
    assertEquals(true, test1.isBefore(test2));
    assertEquals(false, test2.isBefore(test1));

    MutableDateTime test3 = new MutableDateTime(TEST_TIME2, GregorianChronology.getInstance(PARIS));
    assertEquals(true, test1.isBefore(test3));
    assertEquals(false, test3.isBefore(test1));
    assertEquals(false, test3.isBefore(test2));

    assertEquals(false, test2.isBefore(new MockInstant()));
    assertEquals(false, test1.isBefore(new MockInstant()));

    assertEquals(false, new MutableDateTime(TEST_TIME_NOW + 1).isBefore(null));
    assertEquals(false, new MutableDateTime(TEST_TIME_NOW).isBefore(null));
    assertEquals(true, new MutableDateTime(TEST_TIME_NOW - 1).isBefore(null));
}

public void testIsAfter() {
    MutableDateTime test1 = new MutableDateTime(TEST_TIME1);
    MutableDateTime test1a = new MutableDateTime(TEST_TIME1);
    assertEquals(false, test1.isAfter(test1a));
    assertEquals(false, test1a.isAfter(test1));
    assertEquals(false, test1.isAfter(test1));
    assertEquals(false, test1a.isAfter(test1a));

    MutableDateTime test2 = new MutableDateTime(TEST_TIME2);
    assertEquals(false, test1.isAfter(test2));
    assertEquals(true, test2.isAfter(test1));

    MutableDateTime test3 = new MutableDateTime(TEST_TIME2, GregorianChronology.getInstance(PARIS));
    assertEquals(false, test1.isAfter(test3));
    assertEquals(true, test3.isAfter(test1));
    assertEquals(false, test3.isAfter(test2));

    assertEquals(true, test2.isAfter(new MockInstant()));
    assertEquals(false, test1.isAfter(new MockInstant()));

    assertEquals(true, new MutableDateTime(TEST_TIME_NOW + 1).isAfter(null));
    assertEquals(false, new MutableDateTime(TEST_TIME_NOW).isAfter(null));
    assertEquals(false, new MutableDateTime(TEST_TIME_NOW - 1).isAfter(null));
}
```

# jfreechart_1.0.10

## 9

<span style="color:red"> This clone group is good for refactoring with different types of renderer. </span>

[122, 'tests', 'org.jfree.chart.renderer.xy.junit', 'StackedXYAreaRendererTests', 'testDrawWithNullInfo', 204, 235]

[122, 'tests', 'org.jfree.chart.renderer.xy.junit', 'XYAreaRenderer2Tests', 'testDrawWithNullInfo', 184, 215]

[122, 'tests', 'org.jfree.chart.renderer.xy.junit', 'XYAreaRendererTests', 'testDrawWithNullInfo', 212, 243]

[122, 'tests', 'org.jfree.chart.renderer.xy.junit', 'XYStepAreaRendererTests', 'testDrawWithNullInfo', 189, 220]

[122, 'tests', 'org.jfree.chart.renderer.xy.junit', 'XYStepRendererTests', 'testDrawWithNullInfo', 174, 205]

```java
public void testDrawWithNullInfo() {
    boolean success = false;
    try {
        DefaultTableXYDataset dataset = new DefaultTableXYDataset();

        XYSeries s1 = new XYSeries("Series 1", true, false);
        s1.add(5.0, 5.0);
        s1.add(10.0, 15.5);
        s1.add(15.0, 9.5);
        s1.add(20.0, 7.5);
        dataset.addSeries(s1);

        XYSeries s2 = new XYSeries("Series 2", true, false);
        s2.add(5.0, 5.0);
        s2.add(10.0, 15.5);
        s2.add(15.0, 9.5);
        s2.add(20.0, 3.5);
        dataset.addSeries(s2);
        XYPlot plot = new XYPlot(dataset,
                new NumberAxis("X"), new NumberAxis("Y"),
                new StackedXYAreaRenderer());
        JFreeChart chart = new JFreeChart(plot);
        /* BufferedImage image = */ chart.createBufferedImage(300, 200,
                null);
        success = true;
    }
    catch (NullPointerException e) {
        e.printStackTrace();
        success = false;
    }
    assertTrue(success);
}

public void testDrawWithNullInfo() {
    boolean success = false;
    try {
        DefaultTableXYDataset dataset = new DefaultTableXYDataset();

        XYSeries s1 = new XYSeries("Series 1", true, false);
        s1.add(5.0, 5.0);
        s1.add(10.0, 15.5);
        s1.add(15.0, 9.5);
        s1.add(20.0, 7.5);
        dataset.addSeries(s1);

        XYSeries s2 = new XYSeries("Series 2", true, false);
        s2.add(5.0, 5.0);
        s2.add(10.0, 15.5);
        s2.add(15.0, 9.5);
        s2.add(20.0, 3.5);
        dataset.addSeries(s2);
        XYPlot plot = new XYPlot(dataset,
                new NumberAxis("X"), new NumberAxis("Y"),
                new XYAreaRenderer2());
        JFreeChart chart = new JFreeChart(plot);
        /* BufferedImage image = */ chart.createBufferedImage(300, 200,
                null);
        success = true;
    }
    catch (NullPointerException e) {
        e.printStackTrace();
        success = false;
    }
    assertTrue(success);
}

public void testDrawWithNullInfo() {
    boolean success = false;
    try {
        DefaultTableXYDataset dataset = new DefaultTableXYDataset();

        XYSeries s1 = new XYSeries("Series 1", true, false);
        s1.add(5.0, 5.0);
        s1.add(10.0, 15.5);
        s1.add(15.0, 9.5);
        s1.add(20.0, 7.5);
        dataset.addSeries(s1);

        XYSeries s2 = new XYSeries("Series 2", true, false);
        s2.add(5.0, 5.0);
        s2.add(10.0, 15.5);
        s2.add(15.0, 9.5);
        s2.add(20.0, 3.5);
        dataset.addSeries(s2);
        XYPlot plot = new XYPlot(dataset,
                new NumberAxis("X"), new NumberAxis("Y"),
                new XYAreaRenderer());
        JFreeChart chart = new JFreeChart(plot);
        /* BufferedImage image = */ chart.createBufferedImage(300, 200,
                null);
        success = true;
    }
    catch (NullPointerException e) {
        e.printStackTrace();
        success = false;
    }
    assertTrue(success);
}

public void testDrawWithNullInfo() {
    boolean success = false;
    try {
        DefaultTableXYDataset dataset = new DefaultTableXYDataset();

        XYSeries s1 = new XYSeries("Series 1", true, false);
        s1.add(5.0, 5.0);
        s1.add(10.0, 15.5);
        s1.add(15.0, 9.5);
        s1.add(20.0, 7.5);
        dataset.addSeries(s1);

        XYSeries s2 = new XYSeries("Series 2", true, false);
        s2.add(5.0, 5.0);
        s2.add(10.0, 15.5);
        s2.add(15.0, 9.5);
        s2.add(20.0, 3.5);
        dataset.addSeries(s2);
        XYPlot plot = new XYPlot(dataset,
                new NumberAxis("X"), new NumberAxis("Y"),
                new XYStepAreaRenderer());
        JFreeChart chart = new JFreeChart(plot);
        /* BufferedImage image = */ chart.createBufferedImage(300, 200,
                null);
        success = true;
    }
    catch (NullPointerException e) {
        e.printStackTrace();
        success = false;
    }
    assertTrue(success);
}

public void testDrawWithNullInfo() {
    boolean success = false;
    try {
        DefaultTableXYDataset dataset = new DefaultTableXYDataset();

        XYSeries s1 = new XYSeries("Series 1", true, false);
        s1.add(5.0, 5.0);
        s1.add(10.0, 15.5);
        s1.add(15.0, 9.5);
        s1.add(20.0, 7.5);
        dataset.addSeries(s1);

        XYSeries s2 = new XYSeries("Series 2", true, false);
        s2.add(5.0, 5.0);
        s2.add(10.0, 15.5);
        s2.add(15.0, 9.5);
        s2.add(20.0, 3.5);
        dataset.addSeries(s2);
        XYPlot plot = new XYPlot(dataset,
                new NumberAxis("X"), new NumberAxis("Y"),
                new XYStepRenderer());
        JFreeChart chart = new JFreeChart(plot);
        /* BufferedImage image = */ chart.createBufferedImage(300, 200,
                null);
        success = true;
    }
    catch (NullPointerException e) {
        e.printStackTrace();
        success = false;
    }
    assertTrue(success);
}
```

## 10 (Partially Refactorable)

<span style="color:red"> There are many clone groups reported with the same method name of "testCloning", with "similarity" of 1.0, and there are many similar instances left out of the groups. There are many possibilities in test generation for this family of clone groups. </span>


[8, 'tests', 'org.jfree.chart.axis.junit', 'CategoryAxis3DTests', 'testCloning', 82, 94]

[8, 'tests', 'org.jfree.chart.axis.junit', 'CategoryAxisTests', 'testCloning', 173, 185]

[8, 'tests', 'org.jfree.chart.axis.junit', 'ColorBarTests', 'testCloning', 116, 128]

[8, 'tests', 'org.jfree.chart.axis.junit', 'SubCategoryAxisTests', 'testCloning', 127, 139]

```java
public void testCloning() {
    CategoryAxis3D a1 = new CategoryAxis3D("Test");
    CategoryAxis3D a2 = null;
    try {
        a2 = (CategoryAxis3D) a1.clone();
    }
    catch (CloneNotSupportedException e) {
        System.err.println("Failed to clone.");
    }
    assertTrue(a1 != a2);
    assertTrue(a1.getClass() == a2.getClass());
    assertTrue(a1.equals(a2));
}

public void testCloning() {
    CategoryAxis a1 = new CategoryAxis("Test");
    CategoryAxis a2 = null;
    try {
        a2 = (CategoryAxis) a1.clone();
    }
    catch (CloneNotSupportedException e) {
        System.err.println("Failed to clone.");
    }
    assertTrue(a1 != a2);
    assertTrue(a1.getClass() == a2.getClass());
    assertTrue(a1.equals(a2));
}

public void testCloning() {
    ColorBar c1 = new ColorBar("Test");
    ColorBar c2 = null;
    try {
        c2 = (ColorBar) c1.clone();
    }
    catch (CloneNotSupportedException e) {
        System.err.println("Failed to clone.");
    }
    assertTrue(c1 != c2);
    assertTrue(c1.getClass() == c2.getClass());
    assertTrue(c1.equals(c2));
}

public void testCloning() {
    SubCategoryAxis a1 = new SubCategoryAxis("Test");
    SubCategoryAxis a2 = null;
    try {
        a2 = (SubCategoryAxis) a1.clone();
    }
    catch (CloneNotSupportedException e) {
        System.err.println("Failed to clone.");
    }
    assertTrue(a1 != a2);
    assertTrue(a1.getClass() == a2.getClass());
    assertTrue(a1.equals(a2));
} 
```

[457, 'tests', 'org.jfree.data.xy.junit', 'VectorSeriesTests', 'testCloning', 141, 154]

[457, 'tests', 'org.jfree.data.xy.junit', 'XIntervalSeriesTests', 'testCloning', 140, 153]

[457, 'tests', 'org.jfree.data.xy.junit', 'YIntervalSeriesTests', 'testCloning', 139, 152]

```java
public void testCloning() {
    VectorSeries s1 = new VectorSeries("s1");
    s1.add(1.0, 0.5, 1.5, 2.0);
    VectorSeries s2 = null;
    try {
        s2 = (VectorSeries) s1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(s1 != s2);
    assertTrue(s1.getClass() == s2.getClass());
    assertTrue(s1.equals(s2));
}

public void testCloning() {
    XIntervalSeries s1 = new XIntervalSeries("s1");
    s1.add(1.0, 0.5, 1.5, 2.0);
    XIntervalSeries s2 = null;
    try {
        s2 = (XIntervalSeries) s1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(s1 != s2);
    assertTrue(s1.getClass() == s2.getClass());
    assertTrue(s1.equals(s2));
}

public void testCloning() {
    YIntervalSeries s1 = new YIntervalSeries("s1");
    s1.add(1.0, 0.5, 1.5, 2.0);
    YIntervalSeries s2 = null;
    try {
        s2 = (YIntervalSeries) s1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(s1 != s2);
    assertTrue(s1.getClass() == s2.getClass());
    assertTrue(s1.equals(s2));
}
```


[511, 'tests', 'org.jfree.chart.renderer.category.junit', 'LineAndShapeRendererTests', 'testCloning', 175, 190]

[511, 'tests', 'org.jfree.chart.renderer.category.junit', 'LineRenderer3DTests', 'testCloning', 124, 139]

[511, 'tests', 'org.jfree.chart.renderer.category.junit', 'ScatterRendererTests', 'testCloning', 138, 152]

```java
public void testCloning() {
    LineAndShapeRenderer r1 = new LineAndShapeRenderer();
    LineAndShapeRenderer r2 = null;
    try {
        r2 = (LineAndShapeRenderer) r1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(r1 != r2);
    assertTrue(r1.getClass() == r2.getClass());
    assertTrue(r1.equals(r2));

    assertTrue(checkIndependence(r1, r2));

}

public void testCloning() {
    LineRenderer3D r1 = new LineRenderer3D();
    LineRenderer3D r2 = null;
    try {
        r2 = (LineRenderer3D) r1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(r1 != r2);
    assertTrue(r1.getClass() == r2.getClass());
    assertTrue(r1.equals(r2));

    assertTrue(checkIndependence(r1, r2));

}

public void testCloning() {
    ScatterRenderer r1 = new ScatterRenderer();
    ScatterRenderer r2 = null;
    try {
        r2 = (ScatterRenderer) r1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(r1 != r2);
    assertTrue(r1.getClass() == r2.getClass());
    assertTrue(r1.equals(r2));

    assertTrue(checkIndependence(r1, r2));
}
```

[574, 'tests', 'org.jfree.data.xy.junit', 'VectorSeriesCollectionTests', 'testCloning', 108, 127]

[574, 'tests', 'org.jfree.data.xy.junit', 'XIntervalSeriesCollectionTests', 'testCloning', 111, 130]

[574, 'tests', 'org.jfree.data.xy.junit', 'YIntervalSeriesCollectionTests', 'testCloning', 111, 130]

```java
public void testCloning() {
    VectorSeries s1 = new VectorSeries("Series");
    s1.add(1.0, 1.1, 1.2, 1.3);
    VectorSeriesCollection c1 = new VectorSeriesCollection();
    c1.addSeries(s1);
    VectorSeriesCollection c2 = null;
    try {
        c2 = (VectorSeriesCollection) c1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(c1 != c2);
    assertTrue(c1.getClass() == c2.getClass());
    assertTrue(c1.equals(c2));

    // check independence
    s1.setDescription("XYZ");
    assertFalse(c1.equals(c2));
}

public void testCloning() {
    XIntervalSeriesCollection c1 = new XIntervalSeriesCollection();
    XIntervalSeries s1 = new XIntervalSeries("Series");
    s1.add(1.0, 1.1, 1.2, 1.3);
    c1.addSeries(s1);
    XIntervalSeriesCollection c2 = null;
    try {
        c2 = (XIntervalSeriesCollection) c1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(c1 != c2);
    assertTrue(c1.getClass() == c2.getClass());
    assertTrue(c1.equals(c2));

    // check independence
    s1.setDescription("XYZ");
    assertFalse(c1.equals(c2));
}

public void testCloning() {
    YIntervalSeriesCollection c1 = new YIntervalSeriesCollection();
    YIntervalSeries s1 = new YIntervalSeries("Series");
    s1.add(1.0, 1.1, 1.2, 1.3);
    c1.addSeries(s1);
    YIntervalSeriesCollection c2 = null;
    try {
        c2 = (YIntervalSeriesCollection) c1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(c1 != c2);
    assertTrue(c1.getClass() == c2.getClass());
    assertTrue(c1.equals(c2));

    // check independence
    s1.setDescription("XYZ");
    assertFalse(c1.equals(c2));
}
```


[587, 'tests', 'org.jfree.chart.plot.dial.junit', 'AbstractDialLayerTests', 'testCloning', 98, 117]

[587, 'tests', 'org.jfree.chart.plot.dial.junit', 'ArcDialFrameTests', 'testCloning', 159, 177]

[587, 'tests', 'org.jfree.chart.plot.dial.junit', 'StandardDialFrameTests', 'testCloning', 141, 159]

[587, 'tests', 'org.jfree.chart.plot.dial.junit', 'StandardDialRangeTests', 'testCloning', 131, 149]

```java
public void testCloning() {
    // test a default instance
    DialCap c1 = new DialCap();
    DialCap c2 = null;
    try {
        c2 = (DialCap) c1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(c1 != c2);
    assertTrue(c1.getClass() == c2.getClass());
    assertTrue(c1.equals(c2));

    // check that the listener lists are independent
    MyDialLayerChangeListener l1 = new MyDialLayerChangeListener();
    c1.addChangeListener(l1);
    assertTrue(c1.hasListener(l1));
    assertFalse(c2.hasListener(l1));
}

public void testCloning() {
    ArcDialFrame f1 = new ArcDialFrame();
    ArcDialFrame f2 = null;
    try {
        f2 = (ArcDialFrame) f1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(f1 != f2);
    assertTrue(f1.getClass() == f2.getClass());
    assertTrue(f1.equals(f2));

    // check that the listener lists are independent
    MyDialLayerChangeListener l1 = new MyDialLayerChangeListener();
    f1.addChangeListener(l1);
    assertTrue(f1.hasListener(l1));
    assertFalse(f2.hasListener(l1));
}

public void testCloning() {
    StandardDialFrame f1 = new StandardDialFrame();
    StandardDialFrame f2 = null;
    try {
        f2 = (StandardDialFrame) f1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(f1 != f2);
    assertTrue(f1.getClass() == f2.getClass());
    assertTrue(f1.equals(f2));

    // check that the listener lists are independent
    MyDialLayerChangeListener l1 = new MyDialLayerChangeListener();
    f1.addChangeListener(l1);
    assertTrue(f1.hasListener(l1));
    assertFalse(f2.hasListener(l1));
}

public void testCloning() {
    StandardDialRange r1 = new StandardDialRange();
    StandardDialRange r2 = null;
    try {
        r2 = (StandardDialRange) r1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(r1 != r2);
    assertTrue(r1.getClass() == r2.getClass());
    assertTrue(r1.equals(r2));

    // check that the listener lists are independent
    MyDialLayerChangeListener l1 = new MyDialLayerChangeListener();
    r1.addChangeListener(l1);
    assertTrue(r1.hasListener(l1));
    assertFalse(r2.hasListener(l1));
}
```

[845, 'tests', 'org.jfree.data.xy.junit', 'VectorDataItemTests', 'testCloning', 125, 137]

[845, 'tests', 'org.jfree.data.xy.junit', 'XIntervalDataItemTests', 'testCloning', 130, 142]

[845, 'tests', 'org.jfree.data.xy.junit', 'YIntervalDataItemTests', 'testCloning', 129, 141]

```java
public void testCloning() {
    VectorDataItem v1 = new VectorDataItem(1.0, 2.0, 3.0, 4.0);
    VectorDataItem v2 = null;
    try {
        v2 = (VectorDataItem) v1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(v1 != v2);
    assertTrue(v1.getClass() == v2.getClass());
    assertTrue(v1.equals(v2));
}

public void testCloning() {
    XIntervalDataItem item1 = new XIntervalDataItem(1.0, 2.0, 3.0, 4.0);
    XIntervalDataItem item2 = null;
    try {
        item2 = (XIntervalDataItem) item1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(item1 != item2);
    assertTrue(item1.getClass() == item2.getClass());
    assertTrue(item1.equals(item2));
}

public void testCloning() {
    YIntervalDataItem item1 = new YIntervalDataItem(1.0, 2.0, 1.5, 2.5);
    YIntervalDataItem item2 = null;
    try {
        item2 = (YIntervalDataItem) item1.clone();
    }
    catch (CloneNotSupportedException e) {
        e.printStackTrace();
    }
    assertTrue(item1 != item2);
    assertTrue(item1.getClass() == item2.getClass());
    assertTrue(item1.equals(item2));
}
```

# jmeter_5.1.1

## 10

[302, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtractionFromVariable', 116, 134]

[302, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtractionFromVariable2', 136, 154]

[302, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtractionFromVariable3', 156, 174]

[302, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtractionFromVariable4', 176, 194]

[302, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtractionFromVariable5', 196, 214]

[302, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtractionFromVariable6', 216, 234]

[302, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtractionFromVariable7', 236, 254]

[302, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtractionFromVariable8', 256, 274]

[302, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtractionFromVariable9', 276, 294]

```java
    @Test
    public void testVariableExtractionFromVariable() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("(\\d+)\\s+(\\w+)"));
        params.add(new CompoundVariable("$2$")); // template
        params.add(new CompoundVariable("1")); // match number
        params.add(new CompoundVariable("-")); // ALL separator
        params.add(new CompoundVariable("default"));
        params.add(new CompoundVariable("OUTVAR"));
        params.add(new CompoundVariable(INPUT_VARIABLE_NAME));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("1", vars.getObject("OUTVAR_matchNr"));
        assertEquals("times", match);
        assertEquals("times", vars.getObject("OUTVAR"));
        assertEquals("123 times", vars.getObject("OUTVAR_g0"));
        assertEquals("123", vars.getObject("OUTVAR_g1"));
        assertEquals("times", vars.getObject("OUTVAR_g2"));
    }

    @Test
    public void testVariableExtractionFromVariable2() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("(\\d+)\\s+(\\w+)"));
        params.add(new CompoundVariable("$1$$2$")); // template
        params.add(new CompoundVariable("1")); // match number
        params.add(new CompoundVariable("-")); // ALL separator
        params.add(new CompoundVariable("default"));
        params.add(new CompoundVariable("OUTVAR"));
        params.add(new CompoundVariable(INPUT_VARIABLE_NAME));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("1", vars.getObject("OUTVAR_matchNr"));
        assertEquals("123times", match);
        assertEquals("123times", vars.getObject("OUTVAR"));
        assertEquals("123 times", vars.getObject("OUTVAR_g0"));
        assertEquals("123", vars.getObject("OUTVAR_g1"));
        assertEquals("times", vars.getObject("OUTVAR_g2"));
    }

    @Test
    public void testVariableExtractionFromVariable3() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("(\\d+)\\s+(\\w+)"));
        params.add(new CompoundVariable("pre$2$post")); // template
        params.add(new CompoundVariable("1")); // match number
        params.add(new CompoundVariable("-")); // ALL separator
        params.add(new CompoundVariable("default"));
        params.add(new CompoundVariable("OUTVAR"));
        params.add(new CompoundVariable(INPUT_VARIABLE_NAME));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("1", vars.getObject("OUTVAR_matchNr"));
        assertEquals("pretimespost", match);
        assertEquals("pretimespost", vars.getObject("OUTVAR"));
        assertEquals("123 times", vars.getObject("OUTVAR_g0"));
        assertEquals("123", vars.getObject("OUTVAR_g1"));
        assertEquals("times", vars.getObject("OUTVAR_g2"));
    }

    @Test
    public void testVariableExtractionFromVariable4() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("(\\d+)\\s+(\\w+)"));
        params.add(new CompoundVariable("pre$2$")); // template
        params.add(new CompoundVariable("1")); // match number
        params.add(new CompoundVariable("-")); // ALL separator
        params.add(new CompoundVariable("default"));
        params.add(new CompoundVariable("OUTVAR"));
        params.add(new CompoundVariable(INPUT_VARIABLE_NAME));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("1", vars.getObject("OUTVAR_matchNr"));
        assertEquals("pretimes", match);
        assertEquals("pretimes", vars.getObject("OUTVAR"));
        assertEquals("123 times", vars.getObject("OUTVAR_g0"));
        assertEquals("123", vars.getObject("OUTVAR_g1"));
        assertEquals("times", vars.getObject("OUTVAR_g2"));
    }

    @Test
    public void testVariableExtractionFromVariable5() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("(\\d+)\\s+(\\w+)"));
        params.add(new CompoundVariable("$2$post")); // template
        params.add(new CompoundVariable("1")); // match number
        params.add(new CompoundVariable("-")); // ALL separator
        params.add(new CompoundVariable("default"));
        params.add(new CompoundVariable("OUTVAR"));
        params.add(new CompoundVariable(INPUT_VARIABLE_NAME));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("1", vars.getObject("OUTVAR_matchNr"));
        assertEquals("timespost", match);
        assertEquals("timespost", vars.getObject("OUTVAR"));
        assertEquals("123 times", vars.getObject("OUTVAR_g0"));
        assertEquals("123", vars.getObject("OUTVAR_g1"));
        assertEquals("times", vars.getObject("OUTVAR_g2"));
    }

    @Test
    public void testVariableExtractionFromVariable6() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("(\\d+)\\s+(\\w+)"));
        params.add(new CompoundVariable("$2$$2$")); // template
        params.add(new CompoundVariable("1")); // match number
        params.add(new CompoundVariable("-")); // ALL separator
        params.add(new CompoundVariable("default"));
        params.add(new CompoundVariable("OUTVAR"));
        params.add(new CompoundVariable(INPUT_VARIABLE_NAME));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("1", vars.getObject("OUTVAR_matchNr"));
        assertEquals("timestimes", match);
        assertEquals("timestimes", vars.getObject("OUTVAR"));
        assertEquals("123 times", vars.getObject("OUTVAR_g0"));
        assertEquals("123", vars.getObject("OUTVAR_g1"));
        assertEquals("times", vars.getObject("OUTVAR_g2"));
    }

    @Test
    public void testVariableExtractionFromVariable7() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("(\\d+)\\s+(\\w+)"));
        params.add(new CompoundVariable("pre$1$mid$2$post")); // template
        params.add(new CompoundVariable("1")); // match number
        params.add(new CompoundVariable("-")); // ALL separator
        params.add(new CompoundVariable("default"));
        params.add(new CompoundVariable("OUTVAR"));
        params.add(new CompoundVariable(INPUT_VARIABLE_NAME));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("1", vars.getObject("OUTVAR_matchNr"));
        assertEquals("pre123midtimespost", match);
        assertEquals("pre123midtimespost", vars.getObject("OUTVAR"));
        assertEquals("123 times", vars.getObject("OUTVAR_g0"));
        assertEquals("123", vars.getObject("OUTVAR_g1"));
        assertEquals("times", vars.getObject("OUTVAR_g2"));
    }

    @Test
    public void testVariableExtractionFromVariable8() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("(\\d+)\\s+(\\w+)"));
        params.add(new CompoundVariable("pre$1$mid$2$")); // template
        params.add(new CompoundVariable("1")); // match number
        params.add(new CompoundVariable("-")); // ALL separator
        params.add(new CompoundVariable("default"));
        params.add(new CompoundVariable("OUTVAR"));
        params.add(new CompoundVariable(INPUT_VARIABLE_NAME));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("1", vars.getObject("OUTVAR_matchNr"));
        assertEquals("pre123midtimes", match);
        assertEquals("pre123midtimes", vars.getObject("OUTVAR"));
        assertEquals("123 times", vars.getObject("OUTVAR_g0"));
        assertEquals("123", vars.getObject("OUTVAR_g1"));
        assertEquals("times", vars.getObject("OUTVAR_g2"));
    }

    @Test
    public void testVariableExtractionFromVariable9() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("(\\d+)\\s+(\\w+)"));
        params.add(new CompoundVariable("$1$mid$2$post")); // template
        params.add(new CompoundVariable("1")); // match number
        params.add(new CompoundVariable("-")); // ALL separator
        params.add(new CompoundVariable("default"));
        params.add(new CompoundVariable("OUTVAR"));
        params.add(new CompoundVariable(INPUT_VARIABLE_NAME));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("1", vars.getObject("OUTVAR_matchNr"));
        assertEquals("123midtimespost", match);
        assertEquals("123midtimespost", vars.getObject("OUTVAR"));
        assertEquals("123 times", vars.getObject("OUTVAR_g0"));
        assertEquals("123", vars.getObject("OUTVAR_g1"));
        assertEquals("times", vars.getObject("OUTVAR_g2"));
    }
```

// similar idea as in the previous group

[682, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtraction', 69, 78]

[682, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtraction2', 296, 305]

[682, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testComma', 332, 341]

[682, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtraction3', 343, 352]

[682, 'test/src', 'org.apache.jmeter.functions', 'TestRegexFunction', 'testVariableExtraction4', 400, 409]

```java
    @Test
    public void testVariableExtraction() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("<value field=\"(pinposition\\d+)\">(\\d+)</value>"));
        params.add(new CompoundVariable("$2$"));
        params.add(new CompoundVariable("2"));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("5", match);
    }

    @Test
    public void testVariableExtraction2() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("<value field=\"(pinposition\\d+)\">(\\d+)</value>"));
        params.add(new CompoundVariable("$1$"));
        params.add(new CompoundVariable("3"));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("pinposition3", match);
    }

    @Test
    public void testComma() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("<value,? field=\"(pinposition\\d+)\">(\\d+)</value>"));
        params.add(new CompoundVariable("$1$"));
        params.add(new CompoundVariable("3"));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("pinposition3", match);
    }

    @Test
    public void testVariableExtraction3() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("<value field=\"(pinposition\\d+)\">(\\d+)</value>"));
        params.add(new CompoundVariable("_$1$"));
        params.add(new CompoundVariable("2"));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("_pinposition2", match);
    }

    @Test
    public void testVariableExtraction4() throws Exception {
        params = new LinkedList<>();
        params.add(new CompoundVariable("<value field=\"(pinposition\\d+)\">(\\d+)</value>"));
        params.add(new CompoundVariable("$2$, "));
        params.add(new CompoundVariable(".333"));
        variable.setParameters(params);
        String match = variable.execute(result, null);
        assertEquals("1, ", match);
    }
``` 

# commons_collections_4.3

## 11

<span style="color:red"> This family of clone groups are good refactoring candidates (type differences) </span>

[285, 'src/test/java', 'org.apache.commons.collections4', 'BagUtilsTest', 'testUnmodifiableBag', 58, 71]

[285, 'src/test/java', 'org.apache.commons.collections4', 'BagUtilsTest', 'testUnmodifiableSortedBag', 124, 137]

[285, 'src/test/java', 'org.apache.commons.collections4', 'QueueUtilsTest', 'testUnmodifiableQueue', 56, 68]

```java
@Test
public void testUnmodifiableBag() {
    final Bag<Object> bag = BagUtils.unmodifiableBag(new HashBag<>());
    assertTrue("Returned object should be an UnmodifiableBag.",
        bag instanceof UnmodifiableBag);
    try {
        BagUtils.unmodifiableBag(null);
        fail("Expecting NullPointerException for null bag.");
    } catch (final NullPointerException ex) {
        // expected
    }

    assertSame("UnmodifiableBag shall not be decorated", bag, BagUtils.unmodifiableBag(bag));
}

@Test
public void testUnmodifiableSortedBag() {
    final SortedBag<Object> bag = BagUtils.unmodifiableSortedBag(new TreeBag<>());
    assertTrue("Returned object should be an UnmodifiableSortedBag.",
        bag instanceof UnmodifiableSortedBag);
    try {
        BagUtils.unmodifiableSortedBag(null);
        fail("Expecting NullPointerException for null bag.");
    } catch (final NullPointerException ex) {
        // expected
    }

    assertSame("UnmodifiableSortedBag shall not be decorated", bag, BagUtils.unmodifiableSortedBag(bag));
}

@Test
public void testUnmodifiableQueue() {
    final Queue<Object> queue = QueueUtils.unmodifiableQueue(new LinkedList<>());
    assertTrue("Returned object should be an UnmodifiableQueue.", queue instanceof UnmodifiableQueue);
    try {
        QueueUtils.unmodifiableQueue(null);
        fail("Expecting NullPointerException for null queue.");
    } catch (final NullPointerException ex) {
        // expected
    }

    assertSame("UnmodifiableQueue shall not be decorated", queue, QueueUtils.unmodifiableQueue(queue));
}
```

[560, 'src/test/java', 'org.apache.commons.collections4', 'BagUtilsTest', 'testSynchronizedBag', 45, 56]

[560, 'src/test/java', 'org.apache.commons.collections4', 'BagUtilsTest', 'testSynchronizedSortedBag', 111, 122]

[560, 'src/test/java', 'org.apache.commons.collections4', 'QueueUtilsTest', 'testSynchronizedQueue', 44, 54]

```java
@Test
public void testSynchronizedBag() {
    final Bag<Object> bag = BagUtils.synchronizedBag(new HashBag<>());
    assertTrue("Returned object should be a SynchronizedBag.",
        bag instanceof SynchronizedBag);
    try {
        BagUtils.synchronizedBag(null);
        fail("Expecting NullPointerException for null bag.");
    } catch (final NullPointerException ex) {
        // expected
    }
}

@Test
public void testSynchronizedSortedBag() {
    final Bag<Object> bag = BagUtils.synchronizedSortedBag(new TreeBag<>());
    assertTrue("Returned object should be a SynchronizedSortedBag.",
        bag instanceof SynchronizedSortedBag);
    try {
        BagUtils.synchronizedSortedBag(null);
        fail("Expecting NullPointerException for null bag.");
    } catch (final NullPointerException ex) {
        // expected
    }
}

[738, 'src/test/java', 'org.apache.commons.collections4', 'BagUtilsTest', 'testPredicatedBag', 73, 90]

[738, 'src/test/java', 'org.apache.commons.collections4', 'BagUtilsTest', 'testTransformedBag', 92, 109]

[738, 'src/test/java', 'org.apache.commons.collections4', 'BagUtilsTest', 'testPredicatedSortedBag', 139, 156]

[738, 'src/test/java', 'org.apache.commons.collections4', 'BagUtilsTest', 'testTransformedSortedBag', 158, 175]

[738, 'src/test/java', 'org.apache.commons.collections4', 'QueueUtilsTest', 'testPredicatedQueue', 70, 86]

[738, 'src/test/java', 'org.apache.commons.collections4', 'QueueUtilsTest', 'testTransformedQueue', 88, 104]

```java
@Test
public void testPredicatedBag() {
    final Bag<Object> bag = BagUtils.predicatedBag(new HashBag<>(), truePredicate);
    assertTrue("Returned object should be a PredicatedBag.",
        bag instanceof PredicatedBag);
    try {
        BagUtils.predicatedBag(null,truePredicate);
        fail("Expecting NullPointerException for null bag.");
    } catch (final NullPointerException ex) {
        // expected
    }
    try {
        BagUtils.predicatedBag(new HashBag<>(), null);
        fail("Expecting NullPointerException for null predicate.");
    } catch (final NullPointerException ex) {
        // expected
    }
}

@Test
public void testTransformedBag() {
    final Bag<Object> bag = BagUtils.transformingBag(new HashBag<>(), nopTransformer);
    assertTrue("Returned object should be an TransformedBag.",
        bag instanceof TransformedBag);
    try {
        BagUtils.transformingBag(null, nopTransformer);
        fail("Expecting NullPointerException for null bag.");
    } catch (final NullPointerException ex) {
        // expected
    }
    try {
        BagUtils.transformingBag(new HashBag<>(), null);
        fail("Expecting NullPointerException for null transformer.");
    } catch (final NullPointerException ex) {
        // expected
    }
}

@Test
public void testPredicatedSortedBag() {
    final Bag<Object> bag = BagUtils.predicatedSortedBag(new TreeBag<>(), truePredicate);
    assertTrue("Returned object should be a PredicatedSortedBag.",
        bag instanceof PredicatedSortedBag);
    try {
        BagUtils.predicatedSortedBag(null, truePredicate);
        fail("Expecting NullPointerException for null bag.");
    } catch (final NullPointerException ex) {
        // expected
    }
    try {
        BagUtils.predicatedSortedBag(new TreeBag<>(), null);
        fail("Expecting NullPointerException for null predicate.");
    } catch (final NullPointerException ex) {
        // expected
    }
}

@Test
public void testTransformedSortedBag() {
    final Bag<Object> bag = BagUtils.transformingSortedBag(new TreeBag<>(), nopTransformer);
    assertTrue("Returned object should be an TransformedSortedBag",
        bag instanceof TransformedSortedBag);
    try {
        BagUtils.transformingSortedBag(null, nopTransformer);
        fail("Expecting NullPointerException for null bag.");
    } catch (final NullPointerException ex) {
        // expected
    }
    try {
        BagUtils.transformingSortedBag(new TreeBag<>(), null);
        fail("Expecting NullPointerException for null transformer.");
    } catch (final NullPointerException ex) {
        // expected
    }
}

@Test
public void testPredicatedQueue() {
    final Queue<Object> queue = QueueUtils.predicatedQueue(new LinkedList<>(), truePredicate);
    assertTrue("Returned object should be a PredicatedQueue.", queue instanceof PredicatedQueue);
    try {
        QueueUtils.predicatedQueue(null, truePredicate);
        fail("Expecting NullPointerException for null queue.");
    } catch (final NullPointerException ex) {
        // expected
    }
    try {
        QueueUtils.predicatedQueue(new LinkedList<>(), null);
        fail("Expecting NullPointerException for null predicate.");
    } catch (final NullPointerException ex) {
        // expected
    }
}

@Test
public void testTransformedQueue() {
    final Queue<Object> queue = QueueUtils.transformingQueue(new LinkedList<>(), nopTransformer);
    assertTrue("Returned object should be an TransformedQueue.", queue instanceof TransformedQueue);
    try {
        QueueUtils.transformingQueue(null, nopTransformer);
        fail("Expecting NullPointerException for null queue.");
    } catch (final NullPointerException ex) {
        // expected
    }
    try {
        QueueUtils.transformingQueue(new LinkedList<>(), null);
        fail("Expecting NullPointerException for null transformer.");
    } catch (final NullPointerException ex) {
        // expected
    }
}
```